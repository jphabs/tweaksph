<script>
    document.addEventListener("DOMContentLoaded", function () {
        let urlParams = new URLSearchParams(window.location.search);
        let postId = urlParams.get("id");

        if (!postId) {
            document.getElementById("post-container").innerHTML = "<p class='text-center text-gray-500'>Post not found.</p>";
            return;
        }

        const db = firebase.firestore();
        db.collection("posts").doc(postId).get()
            .then((doc) => {
                if (!doc.exists) {
                    document.getElementById("post-container").innerHTML = "<p class='text-center text-gray-500'>Post not found.</p>";
                    return;
                }

                let post = doc.data();
                document.title = post.title + " - Blog";
                document.getElementById("post-title").innerText = post.title;
                document.getElementById("post-content").innerHTML = post.content.replace(/\n/g, "<br>");

                if (post.image) {
                    document.getElementById("post-image").src = post.image;
                    document.getElementById("post-image").style.display = "block";
                }
            })
            .catch((error) => {
                console.error("Error loading post:", error);
            });
    });
</script>